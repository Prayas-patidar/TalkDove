/**
 * **************************************************
 * ******* Name: quixnav
 * ******* Description: A whole navigation for admin dashboard
 * ******* Version: 1.0.0
 * ******* Released on 2019-02-13 12:10:02
 * ******* Support Email :
 * ******* Support Skype :
 * ******* Development/Code Author:
 * ******* Author URL:
 * ******* Themeforest URL (Development):
 * ******* Design Author:
 * ******* License: ISC
 * ***************************************************
 */

jQuery(window).on("load", function() {
    $('#preloader').fadeOut(500);
    $('#main-wrapper').addClass('show');

    if($('body').attr('data-sidebar-position') === "fixed") {
        $('.quixnav-scroll').slimscroll({
            position: "right",
            size: "5px",
            height: "100%",
            color: "transparent"
        });
    }
});

(function($) {
    "use strict";

    $("#menu").metisMenu();
    
    $('.sidebar-right-inner').slimscroll({
        // position: "left",
        size: "5px",
        height: "100%",
        color: "#c6c8c9"
    });
    $(".nav-control").on('click', function() {

        $('#main-wrapper').toggleClass("menu-toggle");

        $(".hamburger").toggleClass("is-active");
    });
    
    //to keep the current page active
    $(function() {
        for (var nk = window.location, 
            o = $("ul#menu a").filter(function() {
                    return this.href == nk;
                })
                .addClass("mm-active")
                .parent()
                .addClass("mm-active");;) {
                    // console.log(o)
                    if (!o.is("li")) break;
                    o = o.parent()
                        .addClass("mm-show")
                        .parent()
                        .addClass("mm-active");
        }

        
        

        $("ul#menu>li").on('click', function() {
            const sidebarStyle = $('body').attr('data-sidebar-style');
            if(sidebarStyle === 'mini') {
                console.log($(this).find('ul'))
                $(this).find('ul').stop()
            }
        })
    });

    $(function() {
        // var win_w = window.outerWidth;
        var win_h = window.outerHeight;
        var win_h = window.outerHeight;
        if (win_h > 0 ? win_h : screen.height) {
            $(".content-body").css("min-height", (win_h + 60) + "px");
        };
    });

    const headerHight = $('.header').innerHeight();

    $(window).scroll(function() {
        if($('body').attr('data-layout') === "horizontal" && $('body').attr('data-header-position') === "static" && $('body').attr('data-sidebar-position') === "fixed")
            $(this.window).scrollTop() >= headerHight ? $('.quixnav').addClass('fixed') :  $('.quixnav').removeClass('fixed')
    });

    $('.sidebar-right-trigger').on('click', function() {
        $('.sidebar-right').toggleClass('show');
    });
    
})(jQuery);